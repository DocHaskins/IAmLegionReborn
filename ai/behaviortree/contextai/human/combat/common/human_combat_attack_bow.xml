<?xml version="1.0"?>
<BehaviorTree xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../../MetaData/schema_ai.xsd" m_ContextType="ai">
    <SequenceMem>
        <Cnd_CanStartTask m_StartPolicy="INTERRUPT"/>
        <Cnd_HasActiveWeapon m_WeaponType="Bow"/>
        <Selector>
            <Cnd_IsHoldRequired m_Invert="true"/>
            <Cnd_SelfInHoldRadius/>
        </Selector>
        <Selector>
            <Cnd_IsRestrictedAreaRequired m_Invert="true"/>
            <Cnd_SelfInRestrictedArea/>
        </Selector>
        <Cnd_IsCombatTargetInAngle m_Angle="$bow_aim_attempt_angle"/>
        <Cnd_IsCombatTargetInLOS/>
        <Cnd_AllyInLineOfFire m_Target="#target" m_SpaceNeeded="1" m_Invert="true"/>
        <Cnd_IsPrimaryWeaponReloaded/>
        <Sequence>
            <Cnd_IsCombatTargetInAngle m_Angle="$bow_aim_cancel_angle"/>
            <SelectorMem>
                <SequenceMem>
                    <Cnd_IsCombatTargetInRadius m_Radius="$bow_shot_single_close_max_range"/>
                    <ExternalTree m_UID="HUMAN_ATTACK_BOW_SHOT_SINGLE_CLOSE" m_CustomName="ShotSingle" m_Hide="true"/>
                </SequenceMem>
                <Optional m_Enabled="$enable_bow_shot_multi">
                    <CooldownTimeDelta m_CooldownTime="$bow_shot_multi_horizontal_cooldown" m_CooldownOnAbort="true">
                        <CombatSlot m_Name="$attack_range_token" m_Limit="$attack_range_limit" m_MinDelay="$attack_range_min_delay" m_Cost="#attack_range_cost">
                            <ExternalTree m_UID="HUMAN_ATTACK_BOW_SHOT_MULTI_HORIZONTAL" m_CustomName="ShotMultiHorizontal" m_Hide="true"/>
                        </CombatSlot>
                    </CooldownTimeDelta>
                </Optional>
                <Optional m_Enabled="$enable_bow_shot_combo">
                    <CooldownTimeDelta m_CooldownTime="$bow_shot_combo_cooldown" m_CooldownOnAbort="true">
                        <CombatSlot m_Name="$attack_range_token" m_Limit="$attack_range_limit" m_MinDelay="$attack_range_min_delay" m_Cost="#attack_range_cost">
                            <ExternalTree m_UID="HUMAN_ATTACK_BOW_SHOT_COMBO" m_CustomName="ShotCombo" m_Hide="true"/>
                        </CombatSlot>
                    </CooldownTimeDelta>
                </Optional>
                <Optional m_Enabled="$enable_bow_shot_single">
                    <CooldownTimeDelta m_CooldownTime="$bow_shot_single_cooldown" m_CooldownOnAbort="true">
                        <CombatSlot m_Name="$attack_range_token" m_Limit="$attack_range_limit" m_MinDelay="$attack_range_min_delay" m_Cost="#attack_range_cost">
                            <ExternalTree m_UID="HUMAN_ATTACK_BOW_SHOT_SINGLE" m_CustomName="ShotSingle" m_Hide="true"/>
                        </CombatSlot>
                    </CooldownTimeDelta>
                </Optional>
            </SelectorMem>
        </Sequence>
    </SequenceMem>
</BehaviorTree>
