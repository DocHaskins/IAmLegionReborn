<?xml version="1.0"?>
<BehaviorTree xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../../MetaData/schema_ai.xsd" m_ContextType="ai">
    <SequenceMem>
        <Cnd_CanStartTask m_StartPolicy="INTERRUPT"/>
        <Cnd_HasActiveWeapon m_WeaponType="OneHandedMelee"/>
        <Selector>
            <Cnd_IsHoldRequired m_Invert="true"/>
            <Cnd_SelfInHoldRadius/>
        </Selector>
        <Selector>
            <Cnd_IsRestrictedAreaRequired m_Invert="true"/>
            <Cnd_SelfInRestrictedArea/>
        </Selector>
        <Cnd_IsPlayer m_Target="#target"/>
        <Cnd_IsCombatTargetMeleeReachable/>
        <Cnd_HasCombatTargetNoControl m_Invert="true"/>
        <Cnd_IsBBValueEqual_string m_Key="#role" m_Value="melee" m_Invert="true"/>
        <Cnd_AllyInLineOfFire m_Target="#target" m_CheckMelee="true" m_SpaceNeeded="$attack_min_space" m_Invert="true"/>
        <SelectorMem>
            <Optional m_Enabled="$enable_attack_fury_charge">
                <CooldownTimeDelta m_CooldownTime="$attack_fury_charge_cooldown" m_CooldownOnAbort="true" m_CooldownBeforeFirstTick="true">
                    <SequenceMem>
                        <Cnd_DistanceToTargetBetween m_Target="#target" m_MinDistance="$attack_fury_charge_min_range" m_MaxDistance="$attack_fury_charge_max_range"/>
                        <Cnd_IsCombatTargetInAngle m_Angle="$attack_fury_charge_max_angle"/>
                        <CombatSlot m_Name="$attack_fury_token" m_Limit="$attack_fury_limit" m_MinDelay="$attack_fury_min_delay" m_Cost="#attack_cost" m_ReleaseOnDamage="#attack_token_release_on_damage" m_CheckIfUsing="true">
                            <ExternalTree m_UID="HUMAN_ATTACK_FURY_CHARGE" m_CustomName="FuryCharge" m_Hide="true"/>
                        </CombatSlot>
                    </SequenceMem>
                </CooldownTimeDelta>
            </Optional>
            <Optional m_Enabled="$enable_attack_fury" m_CustomName="FuryAttack" m_Hide="true">
                <CooldownTimeDelta m_CooldownTime="$attack_fury_cooldown" m_CooldownOnAbort="true">
                    <SequenceMem>
                        <Cnd_DistanceToTargetBetween m_Target="#target" m_MinDistance="$attack_fury_attempt_min_range" m_MaxDistance="$attack_fury_attempt_max_range"/>
                        <CombatSlot m_Name="$attack_fury_token" m_Limit="$attack_fury_limit" m_MinDelay="$attack_fury_min_delay" m_Cost="#attack_cost" m_ReleaseOnDamage="#attack_token_release_on_damage" m_CheckIfUsing="true">
                            <SequenceMem>
                                <Act_Taunt m_Target="#target" m_Type="Fury" m_StartPolicy="INTERRUPT" m_AbandonPolicy="INTERRUPT" m_DecisionPolicy="WHEN_POSSIBLE"/>
                                <Selector>
                                    <ExternalTree m_UID="HUMAN_ATTACK_FURY" m_CustomName="Fury" m_Hide="true"/>
                                    <TimeDeltaLimit m_TimeMax="$attack_attempt_time">
                                        <Act_Move m_Destination="#target_pos" m_MoveStyle="#move_style_run" m_StopAtDest="false" m_TryToFindDestinationOnNavmesh="true" m_IsAvoidanceActive="$use_avoidance" m_StartPolicy="INTERRUPT" m_AbandonPolicy="BLENDOUT" m_DecisionPolicy="ON_END"/>
                                    </TimeDeltaLimit>
                                </Selector>
                            </SequenceMem>
                        </CombatSlot>
                    </SequenceMem>
                </CooldownTimeDelta>
            </Optional>
            <Act_Status m_StatusRequired="FAILURE"/>
        </SelectorMem>
    </SequenceMem>
</BehaviorTree>
