<?xml version="1.0"?>
<BehaviorTree xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../../MetaData/schema_ai.xsd" m_ContextType="ai">
    <Sequence>
        <Opr_GetCombatIdlePosition m_Position="#idle_pos"/>
        <Selector>
            <SequenceMem>
                <Opr_GetSelfPosition m_Position="#self_pos"/>
                <Selector>
                    <Cnd_PositionInRadius m_Position="#idle_pos" m_Radius="2" m_Invert="true"/>
                    <Cnd_DistanceYBetweenPositionsLower m_FirstPosition="#self_pos" m_SecondPosition="#idle_pos" m_Distance="0.5" m_Invert="true"/>
                </Selector>
                <Selector>
                    <SequenceMem>
                        <Selector>
                            <Cnd_PositionInRadius m_Position="#target_pos" m_Radius="$combat_loco_start" m_Invert="true"/>
                            <Cnd_HasStrafePathToCombatIdlePosition m_Invert="true"/>
                        </Selector>
                        <Sequence>
                            <Selector>
                                <Cnd_PositionInRadius m_Position="#target_pos" m_Radius="$combat_loco_end" m_Invert="true"/>
                                <Cnd_HasStrafePathToCombatIdlePosition m_Invert="true"/>
                            </Selector>
                            <Opr_GetDirToCombatTarget m_DirToTarget="#end_dir"/>
                            <Act_Move m_Destination="#idle_pos" m_MoveStyle="#move_style_walk_combat" m_StopAtDest="true" m_EndDir="#end_dir" m_EndRadius="1" m_TryToFindDestinationOnNavmesh="true" m_IsAvoidanceActive="$use_avoidance" m_StartPolicy="INTERRUPT" m_AbandonPolicy="BLENDOUT" m_DecisionPolicy="ON_END"/>
                        </Sequence>
                    </SequenceMem>
                    <Act_StrafeToDestination m_Target="#target" m_Destination="#idle_pos" m_Style="Aggressive" m_FailIfDestUnreachable="true" m_Speed="2" m_SpringUpdateSpeed="$strafe_spring_update_speed" m_EndRadius="$strafe_end_radius" m_StartPolicy="INTERRUPT" m_AbandonPolicy="BLENDOUT" m_DecisionPolicy="ON_END"/>
                </Selector>
            </SequenceMem>
            <ExternalTree m_UID="HUMAN_COMBAT_IDLE" m_CustomName="Idle" m_Hide="true"/>
        </Selector>
    </Sequence>
</BehaviorTree>
