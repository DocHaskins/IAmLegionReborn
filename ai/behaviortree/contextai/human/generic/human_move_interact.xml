<?xml version="1.0"?>
<BehaviorTree xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../MetaData/schema_ai.xsd" m_ContextType="ai">
    <Runner>
        <Selector>
            <!-- track player randomly for a while -->
            <Optional m_Enabled="$enable_generic_track_player">
                <SequenceMem>
                    <Cnd_HasBBValue m_Key="#tracked_ally"/>
                    <Cnd_IsPlayer m_Target="#tracked_ally"/>
                    <Cnd_IsBBValueEqual_EEmotionalState m_Key="#emotional_state" m_Value="Neutral"/>
                    <CooldownTimeDelta m_CooldownTime="15">
                        <Selector>
                            <Cnd_PositionInRadius m_Radius="10" m_Position="#tracked_ally_pos" m_Invert="true"/>
                            <Opr_GetModifiedTime m_TimePoint="#track_ally_time" m_TimeDelta="5"/>
                        </Selector>
                    </CooldownTimeDelta>
                </SequenceMem>
            </Optional>
            <!-- gesture player -->
            <Optional m_Enabled="$enable_generic_gesture_player">
                <SequenceMem>
                    <Cnd_HasBBValue m_Key="#tracked_ally"/>
                    <Cnd_IsPlayer m_Target="#tracked_ally"/>
                    <Cnd_IsBBValueEqual_EEmotionalState m_Key="#emotional_state" m_Value="Friendly"/>
                    <Opr_GetModifiedTime m_TimePoint="#track_ally_time" m_TimeDelta="5"/>
                    <CooldownTimeDelta m_CooldownTime="10">
                        <SequenceMem>
                            <Cnd_PositionInRadius m_Radius="8" m_Position="#tracked_ally_pos"/>
                            <Act_Gesture m_Type="Greet" m_StartPolicy="INTERRUPT" m_AbandonPolicy="BLENDOUT" m_DecisionPolicy="ON_END" m_StopRequest="REGULAR"/>
                        </SequenceMem>
                    </CooldownTimeDelta>
                </SequenceMem>
            </Optional>
            <Act_Status m_StatusRequired="SUCCESS"/>
        </Selector>
    </Runner>
</BehaviorTree>
